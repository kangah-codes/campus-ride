{% extends 'base_user_dash.html' %}

{% block wallet_active %}
    active
{% endblock %}

{% block wallet %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <style type="text/css">.fonts{font-size: 12.5px;}.ipay-btn{background-color: #04448C;border-color: #04448C;border-radius: 17px !important;}.modal{width: 27% !important;}.modal-header{padding-left:48px !important;padding-right: 48px !important;border-bottom: none !important;text-align: center !important;}.modal-footer{height: 120px;padding-left:48px !important;padding-right: 48px !important;margin-bottom: -17px !important;border-top: none !important;}.modal-body{margin-bottom: -25px;padding-right: 48px !important;padding-left: 48px !important;border-bottom: none !important;margin-top: -27px;}#close:hover{text-decoration: none !important;}.logo{width: 65px;height: 65px;}</style>
    <style>
        * {
            font-family: 'Rubik', sans-serif;
        }
        
        body {
            font-family: 'Rubik', sans-serif;
            letter-spacing: 2px;
        }
        
        #panel {
            background-image: -moz-linear-gradient( 122deg, #1F7BBC 30%, #2CA8FF 100%);
            background-image: -webkit-linear-gradient( 122deg, #1F7BBC 30%, #2CA8FF 100%);
            background-image: -ms-linear-gradient( 122deg, #1F7BBC 30%, #2CA8FF 100%);
            background-image: linear-gradient( 122deg, #1F7BBC 30%, #2CA8FF 100%);
        }
        
        .button {
            display: block;
            width: 50%;
            height: 50%;
            border-radius: 10px;
            margin-top: 5px;
            margin-left: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            position: relative;
            padding: 5px 5px;
            outline: none;
            border: none;
            letter-spacing: 2px;
            background-color: #2CA8FF;
            font-family: 'Rubik', sans-serif;
            color: #fff;
            transition: .5s;
            text-transform: uppercase;
        }
        
        .button:hover {
            top: 2px;
            background-position: right;
        }
        
        .button:active {
            top: 5px;
        }
        
        .select-box {
            cursor: pointer;
            position: relative;
            max-width: 20em;
            width: 100%;
            color: #fff;
            font-family: 'Rubik', sans-serif;
        }
        
        .select,
        .label {
            color: #fff;
            display: block;
            font: 400 17px/2em 'Rubik', sans-serif;
        }
        
        .select {
            width: 100%;
            position: absolute;
            top: 0;
            padding: 5px 0;
            height: 40px;
            opacity: 0;
            /* -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; */
            background: none transparent;
            border: 0 none;
            font-family: 'Rubik', sans-serif;
        }
        
        .select-box1 {
            background: #2CA8FF;
            color: #fff;
            font-family: 'Rubik', sans-serif;
        }
        
        .label {
            position: relative;
            padding: 5px 10px;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
        }
        
        .selectOpen .label::after {
            content: "▲";
            color: #fff;
            font-family: 'Rubik', sans-serif;
        }
        
        .label::after {
            color: #fff;
            content: "▼";
            font-size: 12px;
            position: absolute;
            right: 0;
            top: 0;
            padding: 5px 15px;
            border-left: 5px solid #fff;
        }
        
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>

            <div class="panel-header panel-header-lg" id="panel">
                <div class="header text-center">
                    <h2 class="title cssanimation blurInLeft" style="margin-top: 5rem">Your Wallet</h2>

                </div>
            </div>
            <div class="content">
                <div class="row">
                    <div class="col-md-6 pb-5">
                        <div class="card cssanimation fadeInBottom" style="height: 500px;">
                            <div class="card-header text-center ">
                                Wallet Preview
                                <hr width="80%">
                            </div>

                            <div class="card-body ">
                                <div class="row">
                                    <div class="col-12 text-center" style="padding-bottom: 90px;">
                                        <p class="display-3 pt-3 pb-5">Account Balance</p>
                                        {% if bal <= 0 %}
                                        <h1 class="py-5" style="font-size: 60px;color: red" >GHS {{ bal }}</h1>
                                        {% else %}
                                        <h1 class="display-3 pt-3 pb-5" style="font-size: 60px;" >GHS {{ bal }}</h1>
                                        {% endif %}
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 pb-5">

                        <div class="card " style="height: 500px;">
                            <div class="card-header text-center ">
                                Load Your Wallet
                                <hr width="80%">
                            </div>
                            <div class="card-body ">
                                <h6 class="text-center">Load your Campus Ride wallet with mobile money
                                </h6>
                                <div class="row">
                                        <div class="col-lg-3 col-md-3 col-xs-3 col-sm-5">
                                        <div class="input-group-prepend">
                                            <button type="button" class="btn btn-primary ipay-btn" data-toggle="modal" data-target="#ipayModal">Make Payment</button>
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

    <script>
        const momo = $('#momo');
        const amount = $('#amount');
        const pin = $('#pin');
        let choose = $('#select-box1');
        const errorEL = $('#error');
        choose.val('')

        momo.val('')
        amount.val('')
        pin.val('')





        $("select").on("click", function() {

            $(this).parent(".select-box").toggleClass("selectOpen");

        });

        $(document).mouseup(function(e) {
            var container = $(".select-box");

            if (container.has(e.target).length === 0) {
                container.removeClass("selectOpen");
            }
        });


        $("select").on("change", function() {

            var selection = $(this).find("option:selected").text(),
                labelFor = $(this).attr("id"),
                label = $("[for='" + labelFor + "']");

            label.find(".label-desc").html(selection);

        });

        $('#withdraw').on('click', () => {




            if ((choose.val() === " ") || (momo.val().length === 0) || (amount.val().length === 0) || (pin.val().length === 0)) {


                swal({
                    title: "Error",
                    text: "Check your details and try again",
                    icon: "error",
                    button: "Try Again"
                });



            } else {

                swal({
                    title: "Success",
                    text: "Your Withdrawal is Successful",
                    icon: "success",
                });

            }
            choose.val('')


            $(".label-desc").text('Please Select');

            momo.val('')
            amount.val('')
            pin.val('')



        })
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript">(function(){Date.prototype.today = function () { return  this.getFullYear()+(((this.getMonth()+1) < 10)?"0":"") + (this.getMonth()+1) +((this.getDate() < 10)?"0":"") + this.getDate();};Date.prototype.timeNow = function () { return ((this.getHours() < 10)?"0":"") + this.getHours() +((this.getMinutes() < 10)?"0":"") + this.getMinutes() +((this.getSeconds() < 10)?"0":"") + this.getSeconds();};document.getElementById("invoice_id").value = document.getElementById("merchant_code").value+ new Date().today() + new Date().timeNow();})();</script>

    <div id="ipayModal" class="modal fade m-auto" role="dialog" data-keyboard="true" data-backdrop="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <img src="http://fpoimg.com/95x65?text=Logo" class="mx-auto d-block logo">
                            </div>
                            <form action="https://manage.ipaygh.com/gateway/checkout" id="ipay_checkout" method="post" name="ipay_checkout" target="_blank">
                                <div class="modal-body">
                                    <legend class="text-center mt-1">Make Payment</legend>
                                    <input name="merchant_key" type="hidden" value="tk_f0f2bb56-6f86-11ea-b8e9-f23c9170642f">
                                    <input id="merchant_code" type="hidden" value="TST000000003969">
                                    <input name="source" type="hidden" value="WIDGET">
                                    <input name="success_url" type="hidden" value="http://ug.campusride.africa/wallet">
                                    <input name="cancelled_url" type="hidden" value="http://ug.campusride.africa/wallet">
                                    <input id="invoice_id" name="invoice_id" type="hidden" value="">
                                    <div class="row">
                                        <div class="col-lg">
                                            <div class="form-group input-group">
                                                <input type="text" title="Name" name="extra_name" id="name" class="form-control" placeholder="First & Last Name">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg">
                                            <div class="form-group input-group">
                                                <input type="tel" title="Mobile Number" name="extra_mobile" id="number" class="form-control" maxlength="10" placeholder="Contact Number">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg">
                                            <div class="form-group input-group">
                                                <input type="email" name="email" id="extra_email" class="form-control" placeholder="Email">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg">
                                            <div class="form-group input-group">
                                                <input type="text" name="total" class="form-control" id="total" placeholder="Amount(GH₵)">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" name="description" id="description" placeholder="Description of Payment">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg">
                                            <button type="submit" class="btn btn-primary ipay-btn btn-block" style="padding: 8px 11px;"><strong>Pay</strong></button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg text-center mt-2">
                                            <a href="" data-dismiss="modal" id="close">Cancel</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer justify-content-center ">
                                    <div class="row">
                                        <div class="col-lg">
                                            <img src="https://payments.ipaygh.com/app/webroot/img/iPay_payments.png" style="width: 100%;" class="img-fluid mr-auto" alt="Powered by iPay">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

{% endblock %}