{% extends 'base_admin_dash.html' %}
{% block user %}active{% endblock %}
{% block num_notif %}{{ notif_count }}{% endblock %}
{% block notifs %}
  {% for i in notifications %}
          {% for j in i.get_notifications() %}
            <a class="dropdown-item" href="#">{{ j }}</a>
          {% endfor %}
        {% endfor %}
{% endblock %}
{% block users %}
  <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title ">Students</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table">
                      <thead class=" text-primary">
                        <th>
                          ID
                        </th>
                        <th>
                          Name
                        </th>
                        <th>
                          Programme
                        </th>
                        <th>
                          Date Registered
                        </th>
                        <th>
                          Account Balance
                        </th>
                        <th>
                          Number
                        </th>
                        <th>
                          is Activated
                        </th>
                        <th>
                          Action
                        </th>
                      </thead>
                      <tbody>
                        {% for i in students %}
                          <tr>
                            <td>
                              {{ i.public_id }}
                            </td>
                            <td>
                              {{ i.full_name }}
                            </td>
                            <td>
                              {{ i.course }}
                            </td>
                            <td>
                              {{ i.registered_on }}
                            </td>
                            <td>
                              {{ i.account_bal }}
                            </td>
                            <td>
                              {{ i.momo_number }}
                            </td>
                            <td>
                              {{ i.is_activated }}
                            </td>
                            <td>
                              <button class="btn btn-danger" onclick="{{ i.full_name|replace(' ', '') }}()">Delete account</button>
                              <script type="text/javascript">
                                function {{ i.full_name|replace(' ', '') }}() {
                                  swal({
                                    type: "error",
                                    title: "Delete Account",
                                    text:"Are you sure you want to delete this account?",
                                  }).then(function() {
                                    $.ajax({
                                          data : {'bus': []},
                                          type : 'POST',
                                          url : '/del_user/{{ i.public_id }}'
                                      });
                                    window.location.href='/admin_students'
                                  });
                                  // body...
                                }
                              </script>
                            </td>
                          </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
{% endblock %}